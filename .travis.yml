sudo: false
language: go
go:
  - 1.13.3
git:
    depth: 1
install:
    - yum install -y sed
    - sed -i 's/disqus-short-name/'''$DISQUS_SHORTNAME'''/g' ./config.yml
    - go get github.com/gohugoio/hugo
    - rm -rf public || exit 0
branches:
  only:
    - blog
script:
    - hugo --theme=pure
deploy:
    provider: pages
    skip_cleanup: true
    github_token: $GITHUB_TOKEN
    on:
        branch: blog
    local_dir: public
    repo: whalecold/whalecold.github.io
    #fqdn: <custom-domain-if-needed>
    target_branch: master
    email: $GITHUB_EMAIL
    name: whalecold
